@page "/gerenciar-despesas"
@using System.ComponentModel.DataAnnotations
@using InovaSaude.Blazor.Services
@using InovaSaude.Blazor.Models
@inject DespesaService DespesaService
@inject UBSService UBSService
@inject CategoriaService CategoriaService
@inject AuthService AuthService
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime
@attribute [Authorize]

<PageTitle>Gerenciar Despesas - InovaSa√∫de</PageTitle>

<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üí∞ Gerenciar Despesas</h2>
        <div>
            <button class="btn btn-success btn-lg me-2" @onclick="AbrirModalDespesaRapida">
                <span class="oi oi-flash me-2"></span>Despesa R√°pida
            </button>
            <button class="btn btn-primary btn-lg" @onclick="AbrirModalNovaDespesa">
                <span class="oi oi-plus me-2"></span>Nova Despesa
            </button>
        </div>
    </div>

    @if (carregando)
    {
     <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Carregando...</span>
    </div>
    <p class="mt-2 text-muted">Carregando despesas...</p>
  </div>
    }
else
    {
    <!-- Cards de Resumo -->
        <div class="row mb-4">
 <div class="col-md-3">
 <div class="card border-primary text-center">
         <div class="card-body">
         <h6 class="text-muted">Total Gasto</h6>
            <h3 class="text-primary">@despesas.Sum(d => d.Valor).ToString("C")</h3>
          </div>
     </div>
  </div>
        <div class="col-md-3">
     <div class="card border-warning text-center">
            <div class="card-body">
    <h6 class="text-muted">Pendentes</h6>
     <h3 class="text-warning">@despesas.Count(d => d.Status == "PENDENTE")</h3>
   </div>
         </div>
    </div>
  <div class="col-md-3">
 <div class="card border-success text-center">
 <div class="card-body">
         <h6 class="text-muted">Aprovadas</h6>
     <h3 class="text-success">@despesas.Count(d => d.Status == "APROVADA" || d.Status == "PAGA")</h3>
               </div>
      </div>
       </div>
         <div class="col-md-3">
        <div class="card border-danger text-center">
          <div class="card-body">
              <h6 class="text-muted">Rejeitadas</h6>
         <h3 class="text-danger">@despesas.Count(d => d.Status == "REJEITADA")</h3>
      </div>
    </div>
            </div>
        </div>

        <!-- Filtros -->
     <div class="card mb-4">
            <div class="card-body">
     <div class="row g-3">
         <div class="col-md-3">
       <label class="form-label">Pesquisar</label>
    <input type="text" class="form-control" @bind="filtroDescricao" @bind:event="oninput" placeholder="Descri√ß√£o..." />
         </div>
       <div class="col-md-2">
  <label class="form-label">Categoria</label>
       <select class="form-select" @bind="filtroCategoria">
     <option value="">Todas</option>
       @foreach (var cat in categorias)
               {
       <option value="@cat.Id">@cat.Nome</option>
      }
    </select>
                 </div>
        <div class="col-md-2">
      <label class="form-label">Status</label>
              <select class="form-select" @bind="filtroStatus">
                <option value="">Todos</option>
   <option value="PENDENTE">Pendente</option>
           <option value="APROVADA">Aprovada</option>
   <option value="PAGA">Paga</option>
     <option value="REJEITADA">Rejeitada</option>
            </select>
   </div>
    <div class="col-md-2">
      <label class="form-label">UBS</label>
<select class="form-select" @bind="filtroUBS">
        <option value="">Todas</option>
      @foreach (var ubs in ubsList)
                {
         <option value="@ubs.Id">@ubs.Nome</option>
        }
   </select>
    </div>
         <div class="col-md-3 d-flex align-items-end">
 <button class="btn btn-secondary w-100" @onclick="LimparFiltros">
               <span class="oi oi-x me-2"></span>Limpar Filtros
       </button>
    </div>
 </div>
       </div>
        </div>

        <!-- Tabela de Despesas -->
        <div class="card">
            <div class="card-body">
     <div class="table-responsive">
   <table class="table table-hover">
                <thead>
       <tr>
     <th>Data</th>
   <th>Descri√ß√£o</th>
  <th>Categoria</th>
        <th>Tipo</th>
  <th>UBS</th>
       <th class="text-end">Valor</th>
<th>Status</th>
          <th>Vencimento</th>
        <th class="text-center">A√ß√µes</th>
         </tr>
         </thead>
          <tbody>
          @foreach (var despesa in DespesasFiltradas)
              {
       <tr>
     <td>
       <small>@despesa.CreatedAt.ToString("dd/MM/yyyy")</small>
     </td>
            <td>
             <strong>@despesa.Descricao</strong>
    @if (!string.IsNullOrEmpty(despesa.NumeroNota))
     {
     <br/><small class="text-muted">NF: @despesa.NumeroNota</small>
        }
         </td>
            <td>
                 <span class="badge @GetCategoriaBadgeClass(despesa.Categoria?.Nome)">
      @GetCategoriaIcon(despesa.Categoria?.Nome) @(despesa.Categoria?.Nome ?? "-")
             </span>
       </td>
   <td>
                    <small class="text-muted">@despesa.Tipo</small>
    </td>
        <td>
       <small>@(despesa.Ubs?.Nome ?? "-")</small>
         </td>
           <td class="text-end">
   <strong class="@(despesa.Valor > 5000 ? "text-danger" : "text-success")">
          @despesa.Valor.ToString("C")
           </strong>
             </td>
                <td>
         <span class="badge @GetStatusBadgeClass(despesa.Status)">
       @despesa.Status
           </span>
        </td>
    <td>
        @if (despesa.DataVencimento.HasValue)
    {
    var diasRestantes = (despesa.DataVencimento.Value - DateTime.UtcNow).Days;
             <small class="@(diasRestantes < 5 ? "text-danger fw-bold" : "text-muted")">
                  @despesa.DataVencimento.Value.ToString("dd/MM/yyyy")
       @if (diasRestantes < 5 && diasRestantes >= 0)
   {
      <br/><span class="badge bg-danger">@diasRestantes dias</span>
           }
         </small>
     }
   else
      {
   <span class="text-muted">-</span>
        }
   </td>
         <td class="text-center">
   <div class="btn-group btn-group-sm">
      <button class="btn btn-outline-info" @onclick="() => AbrirModalEditarDespesa(despesa)" title="Editar">
    <span class="oi oi-pencil"></span>
   </button>
              @if (despesa.Status == "PENDENTE")
      {
      <button class="btn btn-outline-success" @onclick="@(() => AprovarDespesa(despesa))" title="Aprovar">
     <span class="oi oi-check"></span>
         </button>
       <button class="btn btn-outline-danger" @onclick="@(() => RejeitarDespesa(despesa))" title="Rejeitar">
      <span class="oi oi-x"></span>
    </button>
     }
             <button class="btn btn-outline-danger" @onclick="() => ExcluirDespesa(despesa)" title="Excluir">
       <span class="oi oi-trash"></span>
             </button>
            </div>
             </td>
           </tr>
      }
      </tbody>
       </table>
  </div>

                @if (!DespesasFiltradas.Any())
     {
          <div class="alert alert-info text-center">
         <span class="oi oi-info me-2"></span>
              Nenhuma despesa encontrada com os filtros aplicados.
   </div>
   }
            </div>
        </div>
    }
</div>

<!-- Modal Criar/Editar Despesa -->
@if (mostrarModal)
{
    <div class="modal fade show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
 <div class="modal-dialog modal-xl">
      <div class="modal-content">
                <div class="modal-header">
        <h5 class="modal-title">
      @(despesaEditando == null ? "‚ûï Nova Despesa" : "‚úèÔ∏è Editar Despesa")
        </h5>
         <button type="button" class="btn-close" @onclick="FecharModal"></button>
        </div>
                <EditForm Model="despesaForm" OnValidSubmit="SalvarDespesa">
             <DataAnnotationsValidator />
               <div class="modal-body">
<div class="row g-3">
                    <!-- Linha 1 -->
     <div class="col-md-8">
         <label class="form-label">Descri√ß√£o *</label>
     <InputText class="form-control" @bind-Value="despesaForm.Descricao" placeholder="Ex: Compra de medicamentos para press√£o alta" />
          <ValidationMessage For="@(() => despesaForm.Descricao)" />
         </div>
    <div class="col-md-4">
              <label class="form-label">Valor *</label>
          <InputNumber class="form-control" @bind-Value="despesaForm.Valor" placeholder="0,00" />
    <ValidationMessage For="@(() => despesaForm.Valor)" />
         </div>

                <!-- Linha 2 -->
              <div class="col-md-4">
        <label class="form-label">Categoria *</label>
            <select class="form-select" @bind="despesaForm.CategoriaId">
         <option value="">Selecione...</option>
      @foreach (var categoria in categorias)
       {
         <option value="@categoria.Id">@GetCategoriaIcon(categoria.Nome) @categoria.Nome</option>
       }
           </select>
    <ValidationMessage For="@(() => despesaForm.CategoriaId)" />
     </div>
     <div class="col-md-4">
         <label class="form-label">Tipo *</label>
       <select class="form-select" @bind="despesaForm.Tipo">
      <option value="">Selecione...</option>
    <option value="FIXA">üíº Fixa (Recorrente)</option>
    <option value="VARIAVEL">üìä Vari√°vel</option>
       <option value="EXTRAORDINARIA">‚ö†Ô∏è Extraordin√°ria</option>
          <option value="INVESTIMENTO">üìà Investimento</option>
          </select>
           <ValidationMessage For="@(() => despesaForm.Tipo)" />
                </div>
   <div class="col-md-4">
      <label class="form-label">UBS *</label>
         <select class="form-select" @bind="despesaForm.UbsId">
        <option value="">Selecione...</option>
    @foreach (var ubs in ubsList)
     {
        <option value="@ubs.Id">@ubs.Nome</option>
   }
               </select>
   <ValidationMessage For="@(() => despesaForm.UbsId)" />
 </div>

               <!-- Linha 3 -->
            <div class="col-md-4">
        <label class="form-label">Data Vencimento</label>
         <InputDate class="form-control" @bind-Value="despesaForm.DataVencimento" />
   </div>
     <div class="col-md-4">
          <label class="form-label">Data Pagamento</label>
 <InputDate class="form-control" @bind-Value="despesaForm.DataPagamento" />
     </div>
      <div class="col-md-4">
  <label class="form-label">Status</label>
 <select class="form-select" @bind="despesaForm.Status">
              <option value="PENDENTE">‚è≥ Pendente</option>
           <option value="APROVADA">‚úÖ Aprovada</option>
           <option value="REJEITADA">‚ùå Rejeitada</option>
            <option value="PAGA">üíµ Paga</option>
    </select>
     </div>

              <!-- Linha 4 - Documentos -->
        <div class="col-md-6">
           <label class="form-label">N√∫mero da Nota Fiscal</label>
         <InputText class="form-control" @bind-Value="despesaForm.NumeroNota" placeholder="000123" />
                    </div>
             <div class="col-md-6">
     <label class="form-label">N√∫mero do Empenho</label>
      <InputText class="form-control" @bind-Value="despesaForm.NumeroEmpenho" placeholder="2024/0001" />
          </div>

       <!-- Observa√ß√µes -->
     <div class="col-12">
         <label class="form-label">Observa√ß√µes</label>
       <InputTextArea class="form-control" rows="3" @bind-Value="despesaForm.Observacoes" placeholder="Observa√ß√µes adicionais..." />
        </div>
         </div>

         @if (!string.IsNullOrEmpty(mensagemErro))
         {
  <div class="alert alert-danger mt-3">
          <span class="oi oi-warning me-2"></span>
   @mensagemErro
    </div>
       }
     </div>
       <div class="modal-footer">
         <button type="button" class="btn btn-secondary" @onclick="FecharModal">Cancelar</button>
              <button type="submit" class="btn btn-primary" disabled="@salvando">
                    @if (salvando)
          {
             <span class="spinner-border spinner-border-sm me-2"></span>
   }
      @(despesaEditando == null ? "Criar Despesa" : "Salvar Altera√ß√µes")
  </button>
          </div>
          </EditForm>
            </div>
        </div>
    </div>
}

<!-- Modal Despesa R√°pida -->
@if (mostrarModalRapida)
{
    <div class="modal fade show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">‚ö° Despesa R√°pida</h5>
                    <button type="button" class="btn-close btn-close-white" @onclick="FecharModalRapida"></button>
                </div>
                <div class="modal-body">
                    <EditForm Model="despesaRapidaForm" OnValidSubmit="SalvarDespesaRapida">
                        <DataAnnotationsValidator />
                        <ValidationSummary class="alert alert-danger" />

                        <div class="mb-3">
                            <label class="form-label">Descri√ß√£o ou Nota Fiscal *</label>
                            <InputText class="form-control" @bind-Value="despesaRapidaForm.Descricao" placeholder="Ex: Compra de material ou NF 123456" />
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Valor *</label>
                            <InputNumber class="form-control" @bind-Value="despesaRapidaForm.Valor" placeholder="0,00" />
                        </div>

                        <div class="mb-3">
                            <label class="form-label">UBS *</label>
                            <select class="form-select" @bind="despesaRapidaForm.UbsId">
                                <option value="">Selecione...</option>
                                @foreach (var ubs in ubsList)
                                {
                                    <option value="@ubs.Id">@ubs.Nome</option>
                                }
                            </select>
                        </div>

                        @if (!string.IsNullOrEmpty(mensagemErro))
                        {
                            <div class="alert alert-danger">
                                <span class="oi oi-warning me-2"></span>
                                @mensagemErro
                            </div>
                        }

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" @onclick="FecharModalRapida">Cancelar</button>
                            <button type="submit" class="btn btn-success" disabled="@salvando">
                                @if (salvando)
                                {
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                }
                                ‚ö° Adicionar R√°pido
                            </button>
                        </div>
                    </EditForm>
                </div>
            </div>
        </div>
    </div>
}

@code {
    private List<Despesa> despesas = new();
    private List<UBS> ubsList = new();
    private List<Categoria> categorias = new();
    private bool carregando = true;
    private bool mostrarModal = false;
    private bool mostrarModalRapida = false;
    private bool salvando = false;
    private Despesa? despesaEditando = null;
    private DespesaFormModel despesaForm = new();
    private DespesaRapidaFormModel despesaRapidaForm = new();
    private string? mensagemErro;

    // Filtros
    private string filtroDescricao = "";
    private string filtroCategoria = "";
    private string filtroStatus = "";
    private string filtroUBS = "";

    protected override async Task OnInitializedAsync()
    {
        await CarregarDados();
    }

    private async Task CarregarDados()
    {
        carregando = true;
      try
        {
     despesas = await DespesaService.GetAllDespesasAsync();
            ubsList = await UBSService.GetAllUBSAsync();
            categorias = await CategoriaService.GetAllCategoriasAsync();
        }
        catch (Exception ex)
   {
       mensagemErro = $"Erro ao carregar dados: {ex.Message}";
        }
   finally
    {
         carregando = false;
    }
    }

    private IEnumerable<Despesa> DespesasFiltradas
    {
        get
        {
            var query = despesas.AsEnumerable();

if (!string.IsNullOrWhiteSpace(filtroDescricao))
       {
    query = query.Where(d => d.Descricao.Contains(filtroDescricao, StringComparison.OrdinalIgnoreCase));
   }

 if (!string.IsNullOrWhiteSpace(filtroCategoria))
     {
    query = query.Where(d => d.CategoriaId == filtroCategoria);
            }

            if (!string.IsNullOrWhiteSpace(filtroStatus))
         {
                query = query.Where(d => d.Status == filtroStatus);
            }

     if (!string.IsNullOrWhiteSpace(filtroUBS))
         {
        query = query.Where(d => d.UbsId == filtroUBS);
       }

    return query.OrderByDescending(d => d.CreatedAt);
      }
  }

    private void LimparFiltros()
    {
        filtroDescricao = "";
        filtroCategoria = "";
        filtroStatus = "";
        filtroUBS = "";
    }

    private void AbrirModalNovaDespesa()
    {
    despesaEditando = null;
    despesaForm = new DespesaFormModel();
        mensagemErro = null;
 mostrarModal = true;
    }

    private void AbrirModalDespesaRapida()
    {
        despesaRapidaForm = new DespesaRapidaFormModel();
        mensagemErro = null;
        mostrarModalRapida = true;
    }

    private void FecharModalRapida()
    {
        mostrarModalRapida = false;
        mensagemErro = null;
    }

    private async Task SalvarDespesaRapida()
    {
        salvando = true;
        mensagemErro = null;

        try
        {
            var usuarioId = await AuthService.GetCurrentUserIdAsync();
            if (string.IsNullOrEmpty(usuarioId))
            {
                mensagemErro = "Usu√°rio n√£o autenticado";
                return;
            }

            var categoriaOutros = categorias.FirstOrDefault(c => c.Nome.Contains("Outros") || c.Nome.Contains("Diverso"));
            if (categoriaOutros == null)
            {
                categoriaOutros = categorias.FirstOrDefault();
            }

            if (categoriaOutros == null)
            {
                mensagemErro = "Nenhuma categoria dispon√≠vel. Por favor, crie uma categoria primeiro.";
                return;
            }

            var novaDespesa = new Despesa
            {
                Descricao = despesaRapidaForm.Descricao,
                Valor = despesaRapidaForm.Valor,
                CategoriaId = categoriaOutros.Id,
                Tipo = "VARIAVEL",
                UbsId = despesaRapidaForm.UbsId!,
                Status = "PENDENTE",
                NumeroNota = despesaRapidaForm.Descricao.Contains("NF") ? despesaRapidaForm.Descricao : null,
                UsuarioCriacaoId = usuarioId
            };

            await DespesaService.CreateDespesaAsync(novaDespesa);
            await CarregarDados();
            FecharModalRapida();
        }
        catch (Exception ex)
        {
            mensagemErro = $"Erro ao salvar despesa r√°pida: {ex.Message}";
        }
        finally
        {
            salvando = false;
        }
    }

    private void AbrirModalEditarDespesa(Despesa despesa)
  {
    despesaEditando = despesa;
  despesaForm = new DespesaFormModel
        {
     Descricao = despesa.Descricao,
     Valor = despesa.Valor,
  CategoriaId = despesa.CategoriaId,
    Tipo = despesa.Tipo,
            UbsId = despesa.UbsId,
            DataVencimento = despesa.DataVencimento,
            DataPagamento = despesa.DataPagamento,
            Status = despesa.Status,
            NumeroNota = despesa.NumeroNota,
         NumeroEmpenho = despesa.NumeroEmpenho,
 Observacoes = despesa.Observacoes
 };
        mensagemErro = null;
 mostrarModal = true;
    }

    private void FecharModal()
    {
  mostrarModal = false;
        despesaEditando = null;
        mensagemErro = null;
    }

    private async Task SalvarDespesa()
    {
        salvando = true;
        mensagemErro = null;

        try
        {
            var usuarioId = await AuthService.GetCurrentUserIdAsync();
            if (string.IsNullOrEmpty(usuarioId))
            {
                mensagemErro = "Usu√°rio n√£o autenticado";
                return;
            }

            if (despesaEditando == null)
            {
         // Criar nova despesa
          var novaDespesa = new Despesa
        {
    Descricao = despesaForm.Descricao,
Valor = despesaForm.Valor,
           CategoriaId = despesaForm.CategoriaId!,
       Tipo = despesaForm.Tipo!,
        UbsId = despesaForm.UbsId!,
        DataVencimento = despesaForm.DataVencimento,
         DataPagamento = despesaForm.DataPagamento,
        Status = despesaForm.Status,
     NumeroNota = despesaForm.NumeroNota,
          NumeroEmpenho = despesaForm.NumeroEmpenho,
     Observacoes = despesaForm.Observacoes,
   UsuarioCriacaoId = usuarioId
   };

     await DespesaService.CreateDespesaAsync(novaDespesa);
   }
       else
    {
        // Editar despesa existente
 despesaEditando.Descricao = despesaForm.Descricao;
       despesaEditando.Valor = despesaForm.Valor;
      despesaEditando.CategoriaId = despesaForm.CategoriaId!;
  despesaEditando.Tipo = despesaForm.Tipo!;
             despesaEditando.UbsId = despesaForm.UbsId!;
       despesaEditando.DataVencimento = despesaForm.DataVencimento;
     despesaEditando.DataPagamento = despesaForm.DataPagamento;
        despesaEditando.Status = despesaForm.Status;
       despesaEditando.NumeroNota = despesaForm.NumeroNota;
              despesaEditando.NumeroEmpenho = despesaForm.NumeroEmpenho;
      despesaEditando.Observacoes = despesaForm.Observacoes;
     despesaEditando.UpdatedAt = DateTime.UtcNow;

    await DespesaService.UpdateDespesaAsync(despesaEditando);
            }

       await CarregarDados();
            FecharModal();
        }
        catch (Exception ex)
        {
            mensagemErro = $"Erro ao salvar despesa: {ex.Message}";
    }
        finally
   {
            salvando = false;
    }
  }

    private async Task AprovarDespesa(Despesa despesa)
    {
        try
        {
      despesa.Status = "APROVADA";
         despesa.DataAprovacao = DateTime.UtcNow;
     despesa.UpdatedAt = DateTime.UtcNow;
  await DespesaService.UpdateDespesaAsync(despesa);
       await CarregarDados();
     }
        catch (Exception ex)
        {
 mensagemErro = $"Erro ao aprovar despesa: {ex.Message}";
  }
    }

    private async Task RejeitarDespesa(Despesa despesa)
    {
        try
 {
          despesa.Status = "REJEITADA";
         despesa.UpdatedAt = DateTime.UtcNow;
         await DespesaService.UpdateDespesaAsync(despesa);
            await CarregarDados();
      }
        catch (Exception ex)
        {
            mensagemErro = $"Erro ao rejeitar despesa: {ex.Message}";
        }
    }

    private async Task ExcluirDespesa(Despesa despesa)
  {
        var confirmed = await JSRuntime.InvokeAsync<bool>("confirm", $"Tem certeza que deseja excluir a despesa '{despesa.Descricao}'?");
        if (confirmed)
        {
      try
  {
                await DespesaService.DeleteDespesaAsync(despesa.Id);
 await CarregarDados();
     }
        catch (Exception ex)
            {
     mensagemErro = $"Erro ao excluir despesa: {ex.Message}";
            }
        }
    }

    private bool confirm(string message) => true;

  private string GetStatusBadgeClass(string status) => status switch
    {
        "PENDENTE" => "bg-warning",
    "APROVADA" => "bg-success",
   "REJEITADA" => "bg-danger",
        "PAGA" => "bg-info",
        _ => "bg-secondary"
    };

    private string GetCategoriaBadgeClass(string? categoria) => categoria switch
    {
        "Medicamentos" => "bg-danger",
"Material M√©dico" => "bg-primary",
     "Contas Fixas" => "bg-warning",
        "Pessoal" => "bg-success",
        "Infraestrutura" => "bg-secondary",
        "Servi√ßos Terceirizados" => "bg-info",
 "Material de Expediente" => "bg-dark",
        "Alimenta√ß√£o" => "bg-orange",
    _ => "bg-secondary"
    };

    private string GetCategoriaIcon(string? categoria) => categoria switch
    {
        "Medicamentos" => "üíä",
    "Material M√©dico" => "ü©∫",
        "Contas Fixas" => "üí°",
        "Pessoal" => "üë•",
        "Infraestrutura" => "üèóÔ∏è",
        "Servi√ßos Terceirizados" => "üöë",
        "Material de Expediente" => "üìö",
        "Alimenta√ß√£o" => "üçΩÔ∏è",
  _ => "üìã"
    };

    public class DespesaFormModel
    {
        [Required(ErrorMessage = "Descri√ß√£o √© obrigat√≥ria")]
[StringLength(1000, ErrorMessage = "Descri√ß√£o deve ter no m√°ximo 1000 caracteres")]
      public string Descricao { get; set; } = string.Empty;

    [Required(ErrorMessage = "Valor √© obrigat√≥rio")]
        [Range(0.01, 999999999, ErrorMessage = "Valor deve ser maior que zero")]
public decimal Valor { get; set; }

        [Required(ErrorMessage = "Categoria √© obrigat√≥ria")]
   public string? CategoriaId { get; set; }

        [Required(ErrorMessage = "Tipo √© obrigat√≥rio")]
        public string? Tipo { get; set; }

        [Required(ErrorMessage = "UBS √© obrigat√≥ria")]
        public string? UbsId { get; set; }

        public DateTime? DataVencimento { get; set; }
        public DateTime? DataPagamento { get; set; }
    public string Status { get; set; } = "PENDENTE";
        public string? NumeroNota { get; set; }
 public string? NumeroEmpenho { get; set; }
        public string? Observacoes { get; set; }
    }

    public class DespesaRapidaFormModel
    {
        [Required(ErrorMessage = "Descri√ß√£o ou Nota Fiscal √© obrigat√≥ria")]
        [StringLength(1000)]
        public string Descricao { get; set; } = string.Empty;

        [Required(ErrorMessage = "Valor √© obrigat√≥rio")]
        [Range(0.01, 999999999, ErrorMessage = "Valor deve ser maior que zero")]
        public decimal Valor { get; set; }

        [Required(ErrorMessage = "UBS √© obrigat√≥ria")]
        public string? UbsId { get; set; }
    }
}
